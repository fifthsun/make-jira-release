name: create-jira-release
description: Create a release in Jira using Jira Automation Webhook
author: out-of-mana
inputs:
  webhook-url:
    description: Jira Automation Webhook URL
    required: true
  project: 
    description: The project you're cutting a release for
    default: ${{ github.event.repository.name }}
  release:
    description: Release tag (v1.0.0, 2.3.91, etc)
    default: ${{ github.event.release.tag_name }}
  tickets:
    description: List of Jira tickets to update from MERGED to DEPLOYED
    required: true
outputs:
  output:
    description: The output
    value: ${{ steps.create-release.outputs.output }}
runs:
  using: "composite"
  steps:
    - name: Create release
      shell: bash
      id: create-release
      run: |
        OUTPUT="$(python ${GITHUB_WORKSPACE}/.github/actions/make-jira-release/app.py ${{ inputs.webhook-url }} ${{ inputs.project }}-${{ inputs.release }} ${{ inputs.tickets}})"
        echo "output=${OUTPUT}" >> $GITHUB_OUTPUT
